{% extends "base.html" %}
{% block content %}

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        * {
            padding: 0;
            margin: 0;
        }
        .container {
            margin: 0 auto;
            padding: 1em;
            max-width: max-content;
        }
        .contenedor {
            margin: 1em 2em;
            padding: 2em;
            width: 100%;
            height: 420px;
            max-width: fit-content;
            background-color: #1845ad;
            display: block;
            place-items: center;
            border-radius: 1em;
            color: #fff;
            border: 2px solid black;
        }
        .imagen_perfil {
            width: 200px;
            height: 200px;
            border: 4px solid #1845ad;
            border-radius: 12px;
            margin-right: 1em;
        }
        .informacion {
            padding: 1em;
            position: absolute;
            display: inline;
            width: 500px;
            height: 200px;
        }
        .informacion p {
            font-size: 16px;
            margin-bottom: 10px;
        }
        .profesor-item {
            display: inline-block;
            font-size: x-small;
        }
        .profesor-item a{
            color: white;
            text-decoration: none;
        }
        aside {
            width: 45%;
            padding: 1em;
            margin-right: 1em;
            height: 90%;
            border: 2px solid #287CED;
            border-radius: 1em;
            float: right;
        }
        .contenedor-profesor {
            margin: 0 2em;
            padding: 1em;
            border: 2px solid #287CED;
            border-radius: 1em;
        }
        .contenedor-profesor .title-cont-carreras {
            font-size: x-large;
        }
        .carrera {
            border: 2px solid black;
            background-color: #1845ad;
            border-radius: 1em;
            text-align: center;
            display: inline-block;
            color: #fff;
            padding: 1em;
            width: 250px;
            font-size: large;
        }
        .contenedor-rating {
            margin: 0 2em;
        }
        .space-bottom {
            margin-bottom: 0;
            margin-right: .5em;
            float: left;
        }
        .circle-button {
            border: 1px solid #000;
            background-color: #1845ad;
            border-radius: 5%;
            color: #fff;
            cursor: pointer;
            font-size: 12px;
            width: 3em;
            height: 3em;
            text-align: center;
            transition: background-color 0.3s, color 0.3s;
            display: inline-block;
        }
        .circle-button:hover {
            background-color: white;
            color: #1845ad;
        }
        .profesor-rating {
            margin: 0 2em;
            display: block;
        }
        .funciones-admin {
            margin: 0 2em;
            display: block;
        }
        .btn-main {
            border: 1px solid #000;
            background-color: #1845ad;
            border-radius: 6%;
            color: #fff;
            cursor: pointer;
            font-size: 12px;
            width: 12em;
            height: 4em;
            text-align: center;
            transition: background-color 0.3s, color 0.3s;
            display: inline-block;
        }
        .space-l {
            margin-left: 40px;
        }
        .comentario {
            border: 2px solid black;
            background-color: #fff;
            border-radius: 1em;
            text-align: left;
            color: #1845ad;
            padding: 1em;
            width: 100%;
            width: 700px;
            margin-bottom: 10px;
        }
        .comentarios-container {
            float: left; /* Corrección: se debe usar 'left' en lugar de 'el' */
            width: 65%;
            margin-right: 2em;
        }

        .ccomentarios-container {
            float: left; /* Cambiado a 'left' para que ambos divs floten en la misma dirección */
            width: 33%; /* Ajusta el ancho según sea necesario */
        }

        .ta-r{
            text-align: right;
        }

    </style>
</head>
<body>
    <div class="contenedor">
        <img src="{{ profesor.image.url }}"  class="imagen_perfil" alt="{{ profesor.title }}">

        <div class="informacion">
            <div>
                <i class="fa-solid fa-user fa-lg"></i>
                <p class="profesor-item">{{ profesor.title }}</p>
            </div>

            <div>
                <i class="fa-solid fa-envelope fa-lg"></i>
                <p class="profesor-item"> {{ profesor.email }} </p>
            </div>


            <div>
                <i class="fa-brands fa-linkedin fa-lg"></i>
                <p class="profesor-item"><a href="{{ profesor.url }}" target="_blank">{{ profesor.url }} </a></p>
            </div>

        </div>

        <aside class="container-description">
            <p><strong>Descripción:</strong> {{ profesor.description }}</p>
            <p><strong>Formación Academica:</strong> {{ profesor.education }}</p>
        </aside>

    </div>

    <div class="contenedor-profesor">
        <p class="title-cont-carreras">Asignaturas: </p>
        {% for career in profesor.carreers.all %}
        <p class="carrera">
            {{ career }}
        </p>
        {% endfor %}
    </div>

    <div class="contenedor-rating">
        <p><strong>Calificación: </strong>
            {% if promedio_votos %}
            {{ promedio_votos }}
            {% else %}
            <p>
                Sin rating disponible
            </p>
            {% endif %}
        </p>
    </div>

    <div>
        <div class="profesor-rating">
            <p class="space-bottom">
                Calificación del profesor: {{ Voto.promedio_votos }}
            </p>

            <form method="post" class="form-calificion">
                {% csrf_token %}
                {% if not voto_usuario %}
                <button class="circle-button" type="submit" name="voto" value="1">1</button>
                <button class="circle-button" type="submit" name="voto" value="2">2</button>
                <button class="circle-button" type="submit" name="voto" value="3">3</button>
                <button class="circle-button" type="submit" name="voto" value="4">4</button>
                <button class="circle-button" type="submit" name="voto" value="5">5</button>
                {% endif %}
            </form>

            {% if voto_usuario %}
            <p>
                {{ voto_usuario }}
            </p>
            {% endif %}
        </div>

        <div class="funciones-admin">
            {% if user.is_staff %}
                <a href="{% url 'update_record' profesor.id %}" class="btn btn-primary">Editar</a>
                <a href="{% url 'delete_record' profesor.id %}" class="btn btn-danger">Borrar</a>
            {% endif %}
        </div>
    </div>
    <div class="ccomentarios-container">

        <form class="space-l" method="post">
            {% csrf_token %}
            <textarea name="texto" rows="4" cols="50"></textarea><br>
            <button class="btn-main" type="submit">Comentar</button>
        </form>
    </div>
    <div class="comentarios-container">
        <h2 class="space-l">Comentarios:</h2>
        <ul class="space-l">
            {% for comentario in comentarios %}
                <li class="comentario">
                    <strong>{{ comentario.usuario.username }}:</strong> <br> {{ comentario.texto }} <br> <div class="ta-r">({{ comentario.fecha }})</div>
                </li>
            {% empty %}
                <li>No hay comentarios aún.</li>
            {% endfor %}
        </ul>
    </div>
</body>
{% endblock content %}